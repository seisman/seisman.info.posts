<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>CentOS 7 下的软件安装方法及策略 - SeisMan</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="SeisMan"><meta name=description content="2010 年开始正式接触 Linux，入门发行版是 Ubuntu 10.10，后来过渡到 Ubunu 11.04， 这其中也尝试了很多其他主流的发行版。进入实验室之后，开始用 CentOS 5，然后是 CentOS 6，现在进化到 CentOS 7。
使用了四年的 Linux，前三年都是在瞎折腾，浪费了不少时间，也得到了不少经验与教训。 现在可能是真的老了，已经不愿意折腾了，只希望配置好一个系统之后，就一直使用下去。"><meta name=keywords content="地球物理学,地震学,SAC,软件,开源"><meta name=generator content="Hugo 0.79.1 with theme even"><link rel=canonical href=https://blog.seisman.info/how-to-install-softwares-under-centos-7/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=/dist/even.c2a46f00.min.css rel=stylesheet><link href=/lib/fancybox/jquery.fancybox-3.1.20.min.css rel=stylesheet><meta property="og:title" content="CentOS 7 下的软件安装方法及策略"><meta property="og:description" content="2010 年开始正式接触 Linux，入门发行版是 Ubuntu 10.10，后来过渡到 Ubunu 11.04，
这其中也尝试了很多其他主流的发行版。进入实验室之后，开始用 CentOS 5，然后是
CentOS 6，现在进化到 CentOS 7。
使用了四年的 Linux，前三年都是在瞎折腾，浪费了不少时间，也得到了不少经验与教训。
现在可能是真的老了，已经不愿意折腾了，只希望配置好一个系统之后，就一直使用下去。"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.seisman.info/how-to-install-softwares-under-centos-7/"><meta property="article:published_time" content="2014-11-23T00:00:00+00:00"><meta property="article:modified_time" content="2015-07-14T00:00:00+00:00"><meta itemprop=name content="CentOS 7 下的软件安装方法及策略"><meta itemprop=description content="2010 年开始正式接触 Linux，入门发行版是 Ubuntu 10.10，后来过渡到 Ubunu 11.04，
这其中也尝试了很多其他主流的发行版。进入实验室之后，开始用 CentOS 5，然后是
CentOS 6，现在进化到 CentOS 7。
使用了四年的 Linux，前三年都是在瞎折腾，浪费了不少时间，也得到了不少经验与教训。
现在可能是真的老了，已经不愿意折腾了，只希望配置好一个系统之后，就一直使用下去。"><meta itemprop=datePublished content="2014-11-23T00:00:00+00:00"><meta itemprop=dateModified content="2015-07-14T00:00:00+00:00"><meta itemprop=wordCount content="3800"><meta itemprop=keywords content="CentOS,"><meta name=twitter:card content="summary"><meta name=twitter:title content="CentOS 7 下的软件安装方法及策略"><meta name=twitter:description content="2010 年开始正式接触 Linux，入门发行版是 Ubuntu 10.10，后来过渡到 Ubunu 11.04，
这其中也尝试了很多其他主流的发行版。进入实验室之后，开始用 CentOS 5，然后是
CentOS 6，现在进化到 CentOS 7。
使用了四年的 Linux，前三年都是在瞎折腾，浪费了不少时间，也得到了不少经验与教训。
现在可能是真的老了，已经不愿意折腾了，只希望配置好一个系统之后，就一直使用下去。"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>SeisMan</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>首页</li></a><a href=/post/><li class=mobile-menu-item>归档</li></a><a href=/categories/><li class=mobile-menu-item>分类</li></a><a href=/tags/><li class=mobile-menu-item>标签</li></a><a href=https://link.seisman.info/><li class=mobile-menu-item>链接</li></a><a href=http://seisman.qiniudn.com/seisman-blog.pdf><li class=mobile-menu-item>PDF</li></a><a href=/collections/><li class=mobile-menu-item>合集</li></a><a href=/donations/><li class=mobile-menu-item>捐赠</li></a><a href=/about/><li class=mobile-menu-item>关于</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>SeisMan</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>首页</a></li><li class=menu-item><a class=menu-item-link href=/post/>归档</a></li><li class=menu-item><a class=menu-item-link href=/categories/>分类</a></li><li class=menu-item><a class=menu-item-link href=/tags/>标签</a></li><li class=menu-item><a class=menu-item-link href=https://link.seisman.info/>链接</a></li><li class=menu-item><a class=menu-item-link href=http://seisman.qiniudn.com/seisman-blog.pdf>PDF</a></li><li class=menu-item><a class=menu-item-link href=/collections/>合集</a></li><li class=menu-item><a class=menu-item-link href=/donations/>捐赠</a></li><li class=menu-item><a class=menu-item-link href=/about/>关于</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>CentOS 7 下的软件安装方法及策略</h1><div class=post-meta><span class=post-time>2014-11-23</span><div class=post-category><a href=/categories/Linux/>Linux</a></div></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>文章目录</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#为什么要写读这一篇>为什么要写/读这一篇</a></li><li><a href=#官方源>官方源</a></li><li><a href=#第三方源>第三方源</a></li><li><a href=#官方-rpm-包>官方 rpm 包</a></li><li><a href=#解压即用>解压即用</a></li><li><a href=#第三方-rpm-包>第三方 rpm 包</a></li><li><a href=#第三方包管理器>第三方包管理器</a><ul><li><a href=#linuxbrew>Linuxbrew</a></li></ul></li><li><a href=#编译源码>编译源码</a></li><li><a href=#编译代码>编译代码</a></li><li><a href=#自成系统的软件>自成系统的软件</a></li><li><a href=#例外>例外</a><ul><li><a href=#第三方源-1>第三方源</a></li></ul></li><li><a href=#总结>总结</a></li><li><a href=#修订历史>修订历史</a></li></ul></nav></div></div><div class=post-content><p>2010 年开始正式接触 Linux，入门发行版是 Ubuntu 10.10，后来过渡到 Ubunu 11.04，
这其中也尝试了很多其他主流的发行版。进入实验室之后，开始用 CentOS 5，然后是
CentOS 6，现在进化到 CentOS 7。</p><p>使用了四年的 Linux，前三年都是在瞎折腾，浪费了不少时间，也得到了不少经验与教训。
现在可能是真的老了，已经不愿意折腾了，只希望配置好一个系统之后，就一直使用下去。</p><h2 id=为什么要写读这一篇>为什么要写/读这一篇</h2><p>使用 Linux 尤其是 CentOS 会遇到一些坑，或是一些有洁癖的人不能忍的事情：</p><ol><li>官方源中的软件包版本太老，在功能上无法满足需求；</li><li>多个源的软件包存在版本冲突；</li><li>手动编译软件，默认会将不同文件放置在 <code>/usr/local</code> 下不同的子目录下，使得软件的更新和删除变得麻烦。</li><li>等等&mldr;</li></ol><p>在经历了几次重装 CentOS 之后，特总结出如下几条软件安装的方法与原则，以尽可能保证当前系统的稳定、整洁，尽可能降低系统洁癖引起的重装冲动。</p><p>以下所说，仅限于 CentOS7，对其他发行版，或许有借鉴意义。</p><h2 id=官方源>官方源</h2><p>CentOS 自带的四个官方源中，默认打开的有 base、updates、extras，这三个源中包含了约 9000 个软件包，是最稳定、也是最值得信赖的源。</p><p>因而若一个软件包在官方源内，则应通过官方源安装:</p><pre><code>sudo yum install PackageName
</code></pre><h2 id=第三方源>第三方源</h2><p>官方源虽然包含了很多软件包，但无法满足日常需求。幸好有第三方源，可以作为官方源的补充。</p><p>在使用第三方源的过程中，最怕遇到这两个问题：</p><ol><li>第三方源和官方源中有相同的包，导致官方源的包被第三方源替代；</li><li>多个第三方源中存在同一个软件包，且版本不一致，存在冲突；</li></ol><p>这两个问题经常是致命的，出现各种预料不到的后果，因而选择第三方源要遵循如下原则：</p><ol><li>只选择可靠的第三方源，要确保第三方源不会替换官方源中的包；</li><li>使用尽量少的第三方源，以保证第三方源之间不会冲突；</li></ol><p>就 CentOS 而言，根据以上的原则，使用如下第三方源：</p><ol><li><p>大型第三方源，已确认不会替换官方源的包，且相互之间无冲突</p><ol><li>EPEL：包含 6500 多个软件，科研必备</li><li>ELRepo：包含几十个各种硬件的驱动程序</li><li>Nux Dextop：多媒体相关的软件包（与 EPEL 的个别软件相冲突，可忽略）</li></ol></li><li><p>有些小型第三方源，仅包含了几个软件，确认与官方源和 EPEL 源不会冲突，也可以添加</p><ol><li>Google Chrome：包含了 Google Chrome，不会与官方源和 EPEL 源冲突；</li><li>Adobe：仅包含 flash 插件，已确认不会冲突；</li><li>dropbox：仅包含 dropbox 一个软件，已确认不会冲突；</li></ol></li></ol><p>因而，若一个软件包位于 EPEL、ELRepo 中，或一些小型的第三方源中，则添加该第三方源，并用
<code>yum</code> 命令安装:</p><pre><code>sudo yum install PackageName
</code></pre><h2 id=官方-rpm-包>官方 rpm 包</h2><p>大部分非开源的软件，在 CentOS 官方源或 EPEL 中是没有的。有些软件的官方网站会提供官方 rpm 包。此时可以从官方网站下载与当前系统对应的 rpm 包，直接用如下命令安装:</p><pre><code>sudo rpm -i PackageName.rpm
</code></pre><p>比如，WPS for Linux 就是其中一个。在安装的过程中 rpm 命令会自动检查依赖关系，若该软件所依赖的包在官方源和 EPEL 源中可以找到，则自动安装。</p><p>直接安装 rpm 包的做法相当省事，但该软件不能由 yum 更新，稍稍麻烦一点。有些软件，比如前面提到的 Google、Dropbox 和 Adobe 其实也可以通过这种方法安装，在安装的同时会给系统添加源，对于这类软件依然可以很方便的更新与删除。</p><h2 id=解压即用>解压即用</h2><p>有些软件，官方提供了压缩包，解压之后即可直接运行其中的二进制文件，比如很多 Java 写的软件。这类软件没有给源代码，而是给了可以在当前平台下直接执行的二进制文件。大多数非开源的商业软件都采取这种办法。</p><ol><li>比如 sublime_text、pycharm、mendeley、TauP、sac 等，直接解压，然后将解压后的文件夹复制到 <code>/opt</code> 目录下，然后将该软件的 bin 目录加入到 PATH 中即可。</li><li>比如 Mathematics、Matlab、intel studio，软件包中提供安装脚本，执行该脚本即可安装；</li></ol><p>Linux 下的习惯是，商业软件或第三方软件都安装到 <code>/opt</code> 目录下，这也是大多数商业软件包的默认安装路径，尽量遵循该习惯。</p><h2 id=第三方-rpm-包>第三方 rpm 包</h2><p>有些软件，CentOS 源和 EPEL 源中找不到，官方又没有提供 rpm 包，但是其他第三方源提供了 rpm 包。分情况讨论：</p><ul><li>若该第三方源只包含了很少量的包，且确定这些包与官方源以及其他已使用的第三方源不冲突，则可以添加该第三方源。</li><li>若该第三方源包含了很多软件，很可能与官方源或 EPEL 源有冲突，则不添加该源<ul><li>若该软件包没有复杂的依赖关系，则直接安装该源中的 rpm 包；</li><li>若该软件包依赖于该第三方源中的其他包，则放弃，寻找其他方法；</li></ul></li></ul><h2 id=第三方包管理器>第三方包管理器</h2><p>不同的发行版使用不同的软件包管理器，CentOS 使用 yum，Ubuntu 使用 apt-get。近些年又出现了一些与发行版无关的第三方包管理器，比如 Linuxbrew、Gentoo Prefix、pkgsrc。</p><h3 id=linuxbrew>Linuxbrew</h3><p>Linuxbrew 是由 OS X 平台下非常流行的 Homebrew 移植到 Linux 下的。Linuxbrew 可以作为系统自带的包管理器的一个补充。其特色在于：</p><ul><li>所有软件都安装在 <code>${HOME}/.linuxbrew</code> 目录下；</li><li>软件的版本相对很新；</li><li>install、uninstall、info、list、update、upgrade 等功能</li><li>若库中没有需要的软件包，可以很简单地自己创建 formulae</li></ul><p>试用了一下，一个比较坑的地方是，linuxbrew 会自己内部解决依赖问题。比如，我试着通过 linuxbrew 安装 terminator，然后发现 terminator 依赖于 python，尽管系统已经安装了 python，linuxbrew 还是会安装一份 python，又由于 python 依赖于更多的东西，导致又安装了更多软件包在 home 下。而且，linuxbrew 是从源码编译软件的，所以相对来说速度较慢。</p><h2 id=编译源码>编译源码</h2><p>大部分软件用前面的几种方法应该都能安装上了。如果没安装上，那就得问问自己，真的需要安装这个软件么。如果不是非常必要的话就不要安装啦。如果是必须的软件，那就必须要手动编译了。</p><p>常见的源码编译，一般也就是如下几步。当然，具体情况具体对待:</p><pre><code>tar -xvf xxxx.tgz
./configure --prefix=/opt/xxxx
make
sudo make install
</code></pre><p>一般来说，这类软件的默认安装目录都是 <code>/usr/local</code> ，最终文件会被分别放在
<code>/usr/local</code> 的 bin、lib、share、man 目录下。</p><p>我个人非常不喜欢这种方式，因为作为一个通过源码编译的软件来说，意味着编译者
要完全负起管理该软件的义务，这样的放置方式会来更新或卸载软件带来很多麻烦。
所以我总是会在 configure 的时候加上 prefix 手动指定安装路径。要卸载该软件就直接删除
/opt 下对应的目录，要更新的话，也可以先删除，再重新编译一遍。这样做稍微麻烦的一点是，
需要手动将该软件的 bin 目录加入到 PATH 中，还有可能需要修改 <code>LD_LIBRARY_PATH</code>。
但是一般来说，需要编译源码的软件很少，所以不会造成太大的麻烦。</p><h2 id=编译代码>编译代码</h2><p>好吧，其实我不知道该怎么起标题了。。</p><p>前一节 “编译源码” 主要针对的是一些大型软件包，这一节 “编译代码” 指的是对一些
专业性很强的小代码包的处理方式。比如有些软件包编译之后实际需要的只是一个
二进制文件，这个时候就没有必要安装到 <code>/opt</code> 了，合适的方式是在自己的 HOME 下
建立 bin 目录，并将其路径加入到 <code>.bashrc</code> 中，然后将编译生成的二进制文件复制
到该目录下即可:</p><pre><code>mkdir ${HOME}/bin
echo 'export PATH=${HOME}/bin:$PATH'&gt;&gt; ~/.bashrc
</code></pre><p>比如我的 <code>${HOME}/bin</code> 目录下有如下文件：</p><ul><li><code>distaz</code> ：给出地球上两点经纬度，计算震中距和方位角</li><li><code>pssac</code> ：在 GMT 中绘制 SAC 文件</li><li><code>rdseed</code> ：SEED 格式转 SAC 格式</li><li><code>win2sac_32</code> 、 <code>catwin32</code> ：Hi-net 网站提供的用于处理 Hi-net 数据的程序</li><li><code>st</code> ：sublime_text 被安装到 <code>/opt</code> 目录下，在此建立一个软链接，方便在命令行调用 sublime text</li><li><code>wlt.pl</code> ：校内用于登陆网络通的脚本，在命令行修改网络端口，好 happy</li><li><code>fk</code> 、 <code>fk.pl</code> 、 <code>syn</code> 、 <code>trav</code> ：Prof. Lupei Zhu 的用于计算合成地震图的程序，源代码有不少，实际需要用的也就这三个可执行文件和一个 perl 脚本。</li><li><code>matlab</code> ：指向 matlab 的一个软连接；</li></ul><p>不要随便什么二进制文件都往 bin 里放，这里只应放一些常用的命令或很通用的工具。</p><h2 id=自成系统的软件>自成系统的软件</h2><p>有一类软件，其拥有众多模块或包，为了管理这众多的模块，就需要拥有一个自己的模块 / 包管理器。这其中以 TeX、Perl 和 Python 为代表。对于这一类软件，其众多的模块是最大的优势，也是最值得利用的资源，因而我通常会选择手动安装它们，原因如下：</p><ul><li>系统的源中不可能包含该软件的所有模块；</li><li>系统的源中该软件的模块的更新要远远滞后于最新版本；</li></ul><p>当然，即便是使用系统自带的版本，也依然可以用该软件自带的包管理器来安装模块。但将导致：</p><ul><li>部分模块用系统的 yum 管理，部分模块用软件自带的包管理器管理；</li><li>yum 安装的模块一般版本较老，软件的包管理器要安装的大多是最新版本；</li></ul><p>这一方面会导致模块管理的混乱，另一方面用软件自带的包管理其安装模块时，可能会依赖于其他模块的最新版本，若该模块是通过系统 yum 安装的较旧的版本，则可能导致模块的安装失败。</p><p>因而，对于这类软件，一般单独安装，并用各自的包管理器管理模块：</p><ul><li>TeXLive：通过 TeXLive iso 镜像文件安装，使用其自带的 tlmgr 管理包</li><li>Perl：通过 plenv 安装最新版本的 Perl，使用 plenv 自带的 cpanm 安装模块</li><li>Python：通过 pyenv 安装最新版本的 Python，使用 Python 自带的 pip 安装模块</li></ul><h2 id=例外>例外</h2><p>有规则总有例外。</p><h3 id=第三方源-1>第三方源</h3><p>mosquito-myrepo 是一个私人维护的源，其中包含了中文输入法、QQ、飞信、为知笔记、有道词典、百度云以及若干音频、视频播放器。我对这个源的态度是又爱又恨，其提供了很多中国人需要的软件，但因为其依赖于除 EPEL 外的其他第三方软件源，进而可能导致包冲突。所以对该源的使用，要保持谨慎。</p><h2 id=总结>总结</h2><p>简单总结一下:</p><ol><li>为系统添加 EPEL 源、Nux Dextop、ELRepo 源和个别其他小型第三方源</li><li>能够从源中安装的就从源中安装</li><li>不能从源中安装的尽量找 rpm 包安装</li><li>找不到 rpm 包的就试试 linuxbrew</li><li>能不手动编译的就不要手动编译</li></ol><h2 id=修订历史>修订历史</h2><ol><li>2014-11-23：初稿；</li><li>2014-12-01：第三方源中加入 ELRepo 源；</li><li>2015-07-14：第三方源中加入 Nux Dextop；</li></ol></div><div class=post-copyright><p class=copyright-item><span class=item-title>文章作者</span>
<span class=item-content>SeisMan</span></p><p class=copyright-item><span class=item-title>上次更新</span>
<span class=item-content>2015-07-14</span></p></div><div class=post-reward><input type=checkbox name=reward id=reward hidden>
<label class=reward-button for=reward>赞赏支持</label><div class=qr-code><label class=qr-code-image for=reward><img class=image src=/images/wechatpay-qr-code.png>
<span>微信打赏</span></label>
<label class=qr-code-image for=reward><img class=image src=/images/alipay-qr-code.png>
<span>支付宝打赏</span></label></div></div><footer class=post-footer><div class=post-tags><a href=/tags/CentOS/>CentOS</a></div><nav class=post-nav><a class=prev href=/how-to-use-gmt-under-windows/><i class="iconfont icon-left"></i><span class="prev-text nav-default">Windows 下使用 GMT 的正确姿势</span>
<span class="prev-text nav-mobile">上一篇</span></a>
<a class=next href=/taup-mark-traveltime/><span class="next-text nav-default">利用 taup_setsac 为 SAC 文件标记理论到时</span>
<span class="next-text nav-mobile">下一篇</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname==='localhost')return;var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;var disqus_shortname='seisman';dsq.src='//'+disqus_shortname+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:seisman.info@gmail.com class="iconfont icon-email" title=email></a><a href=https://github.com/seisman class="iconfont icon-github" title=github></a><a href=https://movie.douban.com/people/131919859 class="iconfont icon-douban" title=douban></a><a href=https://blog.seisman.info/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>由 <a class=hexo-link href=https://gohugo.io>Hugo</a> 强力驱动</span>
<span class=division>|</span>
<span class=theme-info>主题 -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span>
<span class=copyright-year>&copy;
2013 -
2020
<span class=heart><i class="iconfont icon-heart"></i></span><span class=author>SeisMan</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script type=text/javascript src=/lib/jquery/jquery-3.2.1.min.js></script><script type=text/javascript src=/lib/slideout/slideout-1.0.1.min.js></script><script type=text/javascript src=/lib/fancybox/jquery.fancybox-3.1.20.min.js></script><script type=text/javascript src=/dist/even.26188efa.min.js></script></body></html>