<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Hi-net 的仪器响应 - SeisMan</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="SeisMan"><meta name=description content="前文介绍了 channel table 文件的格式以及每一列的含义，其中 7-13 列记录了 channel 的 仪器信息。由于 Hi-net 并没有像 IRIS 那样提供 RESP 或 SAC_PZ 文件，因而需要用户根据 7-13 列的信息手动推导仪器响应。
"><meta name=keywords content="地球物理学,地震学,SAC,软件,开源"><meta name=generator content="Hugo 0.82.0 with theme even"><link rel=canonical href=https://blog.seisman.info/hinet-instrumental-response/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=/dist/even.c2a46f00.min.css rel=stylesheet><link href=/lib/fancybox/jquery.fancybox-3.1.20.min.css rel=stylesheet><meta property="og:title" content="Hi-net 的仪器响应"><meta property="og:description" content="前文介绍了 channel table 文件的格式以及每一列的含义，其中 7-13 列记录了 channel 的
仪器信息。由于 Hi-net 并没有像 IRIS 那样提供 RESP 或 SAC_PZ 文件，因而需要用户根据
7-13 列的信息手动推导仪器响应。"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.seisman.info/hinet-instrumental-response/"><meta property="article:section" content="post"><meta property="article:published_time" content="2014-09-06T00:00:00+00:00"><meta property="article:modified_time" content="2018-10-04T00:00:00+00:00"><meta itemprop=name content="Hi-net 的仪器响应"><meta itemprop=description content="前文介绍了 channel table 文件的格式以及每一列的含义，其中 7-13 列记录了 channel 的
仪器信息。由于 Hi-net 并没有像 IRIS 那样提供 RESP 或 SAC_PZ 文件，因而需要用户根据
7-13 列的信息手动推导仪器响应。"><meta itemprop=datePublished content="2014-09-06T00:00:00+00:00"><meta itemprop=dateModified content="2018-10-04T00:00:00+00:00"><meta itemprop=wordCount content="2172"><meta itemprop=keywords content="Hinet,仪器响应,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Hi-net 的仪器响应"><meta name=twitter:description content="前文介绍了 channel table 文件的格式以及每一列的含义，其中 7-13 列记录了 channel 的
仪器信息。由于 Hi-net 并没有像 IRIS 那样提供 RESP 或 SAC_PZ 文件，因而需要用户根据
7-13 列的信息手动推导仪器响应。"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>SeisMan</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>首页</li></a><a href=/post/><li class=mobile-menu-item>归档</li></a><a href=/categories/><li class=mobile-menu-item>分类</li></a><a href=/tags/><li class=mobile-menu-item>标签</li></a><a href=https://seismo-learn.org/links/><li class=mobile-menu-item>链接</li></a><a href=http://seisman.qiniudn.com/seisman-blog.pdf><li class=mobile-menu-item>PDF</li></a><a href=/collections/><li class=mobile-menu-item>合集</li></a><a href=/donations/><li class=mobile-menu-item>捐赠</li></a><a href=/about/><li class=mobile-menu-item>关于</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>SeisMan</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>首页</a></li><li class=menu-item><a class=menu-item-link href=/post/>归档</a></li><li class=menu-item><a class=menu-item-link href=/categories/>分类</a></li><li class=menu-item><a class=menu-item-link href=/tags/>标签</a></li><li class=menu-item><a class=menu-item-link href=https://seismo-learn.org/links/>链接</a></li><li class=menu-item><a class=menu-item-link href=http://seisman.qiniudn.com/seisman-blog.pdf>PDF</a></li><li class=menu-item><a class=menu-item-link href=/collections/>合集</a></li><li class=menu-item><a class=menu-item-link href=/donations/>捐赠</a></li><li class=menu-item><a class=menu-item-link href=/about/>关于</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>Hi-net 的仪器响应</h1><div class=post-meta><span class=post-time>2014-09-06</span><div class=post-category><a href=/categories/%E5%9C%B0%E9%9C%87%E5%AD%A6%E5%9F%BA%E7%A1%80/>地震学基础</a></div></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>文章目录</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#警告>警告</a></li><li><a href=#回顾>回顾</a></li><li><a href=#流程>流程</a><ul><li><a href=#输入>输入</a></li><li><a href=#输入增强>输入增强</a></li><li><a href=#analog-stage>Analog Stage</a></li><li><a href=#analog-digital-conversion>Analog-Digital Conversion</a></li><li><a href=#digital-stage>Digital Stage</a></li></ul></li><li><a href=#总结>总结</a></li><li><a href=#附录>附录</a><ul><li><a href=#官方回复邮件>官方回复邮件</a></li></ul></li></ul></nav></div></div><div class=post-content><p>前文介绍了 channel table 文件的格式以及每一列的含义，其中 7-13 列记录了 channel 的
仪器信息。由于 Hi-net 并没有像 IRIS 那样提供 RESP 或 SAC_PZ 文件，因而需要用户根据
7-13 列的信息手动推导仪器响应。</p><h2 id=警告>警告</h2><p>本文是在 Hi-net 官方网站内容、Hi-net 官方回复邮件内容以及个人对于仪器响应的理解的基础上完成的。</p><p>本人无法保证本文的内容是完全正确的，望读者带着批判的眼光阅读本文！</p><p>若因阅读本文内容而造成数据处理的任何偏差以及由此带来的任何后果，由用户自己承担。</p><h2 id=回顾>回顾</h2><p>先回顾一下 7-13 列的含义：</p><ul><li>[7]：Quantization bit rate of A/D conversion</li><li>[8]：Sensor sensitivity (in V/unit_of_input)</li><li>[9]：Unit of input</li><li>[10]：Nature period of the sensor</li><li>[11]：Damping constant of the sensor</li><li>[12]：Amplification factor applied to sensor output prior to A/D conversion (in dB)</li><li>[13]：LSB value of A/D conversion</li></ul><h2 id=流程>流程</h2><p>根据 <a href=/physical-details-of-instrumental-response/>《仪器响应的物理细节》</a> 一文的分析，将 7-13 列按照仪器响应的过程再细分一下：</p><ul><li>输入：波场振幅（[9]）</li><li>输入增强：对输入波场进行放大（[12]）</li><li>Analog Stage：将连续的波场振幅转换为连续电压信号（[10]、[11]、[8]）</li><li>Analog-Digital Conversion：将连续电压信号转换为离散电压信号（[7]、[13]）</li><li>Digital Stage：对离散数据进行处理</li></ul><h3 id=输入>输入</h3><p>[9] 给出了输入波场振幅的单位，一般来说，其值为 <code>m/s</code>，即 Hi-net 是速度地震仪。</p><h3 id=输入增强>输入增强</h3><p>这一步对输入的波场振幅进行放大，[12] 给出了放大系数 $L_{dB}$，单位为 dB。</p><p>根据维基百科中对 <a href=http://en.wikipedia.org/wiki/Decibel#Field_quantities>场量分贝</a> 的定义可知：</p><p>$$L_{dB} = 20 \log_{10}\left(\frac{A_o}{A_i}\right)$$</p><p>因而，本步骤的输出波场振幅与输入波场振幅的比 $A_o/A_i$ ，即振幅放大系数为</p><h3 id=analog-stage>Analog Stage</h3><p>在 Hi-net 的官方回复邮件中提到，Hi-net 统一使用的是 “moving coil velocity type seismometer”，此种地震仪的 transfer 函数在 Laplace 域表示为：</p><p>$$G \frac{s^2}{s^2+2 h \omega s + \omega^2}$$</p><p>其中</p><ul><li>$G$：Sensor sensitivity，即 $G$= [8]</li><li>$h$：damping constant， 即 $h$= [11]</li><li>$\omega$： natural angular frequency，即 $\omega=\frac{2\pi}{[10]}$</li></ul><p>从 channel table 即可计算出这三个量，代入 transfer 函数，根据 <a href=/instrumental-response-details/>仪器响应实例分析</a>
中的类似步骤，即可计算出零点和极点，以及归一化因子 $A_0$。</p><p>需要注意的是，计算归一化因子 $A_0$ 时，归一化频率应为 20 Hz。原因未知，但Hinet给的
三个RESP文件均是在20 Hz处做归一化。</p><h3 id=analog-digital-conversion>Analog-Digital Conversion</h3><p>首先需要理解两个概念，bit rate 和 LSB value。</p><p>模数转换器（ADC）的作用是将连续的模拟信号（电压，单位 V）转换为离散的数字信号（单位为 counts）。如果一个 ADC 的 bit rate 为 8，则该 ADC 可以将模拟信号编码为 $2^8=256$ 个不同的离散值，从 0 至 255 或从 - 128 到 127。</p><p>若该 ADC 的电压测量范围为 $\pm 20 V$，则该 ADC 可以将 40V 的电压测量范围转换为 256 种离散值，因而该 ADC 的电压分辨率为 40/256 V/counts。这一电压分辨率也称为最低有效位（LSB）电压，即 “使得输出离散信号产生一个变化所需的最小输入电压的差值”。</p><p>bit rate 与 LSB value 之间的关系如下：</p><p>$$\frac{V_{high}-V_{low}}{2^{bitrate}}$$</p><p>其中 $V_{high}$ 和 $V_{low}$ 分别为 ADC 的测量电压上下限。</p><p>LSB value 的倒数 $\frac{1}{[13]}$，其单位为 $counts/V$，即单位电压所对应的离散值得变化量，也就是这一阶段的增益 $S_d=\frac{1}{[13]}$。</p><h3 id=digital-stage>Digital Stage</h3><p>这一阶段，对离散信号进行处理，需要考虑这个过程中的增益。</p><p>在 Hi-net 官方的 <a href="http://www.hinet.bosai.go.jp/REGS/seed/?LANG=en">Response of Observation Equipment</a> 说明中，给出了三种仪器响应 RESP 文件，并指出</p><blockquote><p>In all response files for Hi-net data, sensor sensitivity is set to
the case of 200 V/(cm/s). Actual sensitivity of each channel is shown
at the 8th column of the channel table file. This means that the
values at 37th line from the top and 4th line from the bottom should
be modified from the response file in this web page, considering this
point.</p></blockquote><p>即 <a href="http://www.hinet.bosai.go.jp/REGS/seed/?LANG=en">Response of Observation Equipment</a> 中给出的三种仪器响应 RESP 文件，仅仅只是示例，每个 RESP 文件的前 37 行和后 4 行（PS：此处行号并不包括注释行）必须根据 channel table 中的值进行修改，而其余行则不需要修改。看看 RESP 文件的内容可知，不需要修改的行恰好对应 Digital Stage（stage number 为 3 或 4），这暗示着 **Hi-net 的所有 channel 的 Digital Stage 部分是完全相同的 **。</p><p>从 RESP 文件中可以看出，stage 3 和 stage 4 虽然看上去很复杂，但实际上其振幅增益 $S_d=1.0$。换句话说，也就是不必过多考虑这一阶段。</p><h2 id=总结>总结</h2><ul><li>检查 [9] 确认输入波场为速度场</li><li>由 [12] 计算波场放大系数</li><li>由 [10]、[11] 构造增益为 1 的 transfer 函数，计算其零点和极点，并计算 transfer 函数在自然频率处的振幅，以得到归一化因子 $A_0$</li><li>[8] 为增益，可直接使用</li><li>对 [13] 列取倒数得到增益（[7]没有用）</li></ul><p>由此，可根据 channel table 完整构建每个 channel 的仪器响应文件，RESP 格式或 SAC_PZ 格式均可，一般用 SAC_PZ 格式即可。</p><h2 id=附录>附录</h2><h3 id=官方回复邮件>官方回复邮件</h3><p>Question1: Apr 24, 2014 09:32 (UT) +0900(JST)  </p><pre><code>Hi,

I am using Hi-net data and am confused with the instrumental response
even after I have looked through all pages of Hi-net website.

In the page of 'For Registered Users' -&gt; 'Response of Observation Equipment',
only three RESP files are given. It seems that I have to rewrite a new RESP
or SAC_PZ file for each channel.

So I have to confirm that I understand details of response, which are very
important for correct data processing.

1. Do all channels have the same zeroes and poles?
2. At line 19, do all channels have the same A0 Normalization factor (0.999953)?
3. In the FAQ Q08, one equation is given to convert the A/D value from an WIN32
   file to the corresponding physical quantity. It is

        v = I * [13] / ([8] * 10 ^ ([12] / 20 ) )

   If I want to generate a SAC PZ file, the CONSTANT will be

    CONSTANT = [8]*10^([12]/20) / [13] * A0 ?

I am looking forward to your reply.

Best Regards.
</code></pre><p>Answer1: May 07, 2014 08:30 (UT) +0900(JST)  </p><pre><code>Thank you for accessing our website.
This is the NIED Hi-net/F-net/V-net administrator.

In the &quot;Response of Observation Equipment&quot; page, sample RESP files are
provided and you need to modify them according to your purposes, as you
wrote. The explanation in this page assumes that the parameters of the
seismometer other than the gain factor do not change. Strictly speaking,
the zeros, the poles, and the A0 normalization factor can change
depending on the parameters of the seismometer. The moving coil velocity
type seismometer is used in Hi-net and its transfer function in the
Laplace domain is given as:

    Gs^2/(s^2 + 2hws + w^2)

where G, h and w are the gain factor, the damping constant, and the
natural angular frequency, respectively. Roots of the numerator and the
denominator correspond to the zeros and the poles, respectively, and the
A0 normalization factor is the inverse of the absolute value of the
above equation except G at the normalization frequency. Detailed
explanation about this type of seismometer is available in many
literature, such as,

Scherbaum, F., Of Poles and Zeros: Fundamentals of Digital Seismology,
Kluwer Academic Publishers, 1996.
#see chapter 4

The gain factor, the damping constant, and the natural period are
provided in the channels table file as explained in the Q&amp;A08.
Note that the gain factor is measured at its natural frequency.
http://www.hinet.bosai.go.jp/faq/?LANG=en#Q08

Please read the SEED manual about further details and SAC manual about
SAC PZ file.

- SEED: http://www.fdsn.org/publications.htm
- SAC: http://www.iris.edu/files/sac-manual/

Sincerely,
</code></pre></div><div class=post-copyright><p class=copyright-item><span class=item-title>文章作者</span>
<span class=item-content>SeisMan</span></p><p class=copyright-item><span class=item-title>上次更新</span>
<span class=item-content>2018-10-04</span></p></div><div class=post-reward><input type=checkbox name=reward id=reward hidden>
<label class=reward-button for=reward>赞赏支持</label><div class=qr-code><label class=qr-code-image for=reward><img class=image src=/images/wechatpay-qr-code.png>
<span>微信打赏</span></label>
<label class=qr-code-image for=reward><img class=image src=/images/alipay-qr-code.png>
<span>支付宝打赏</span></label></div></div><footer class=post-footer><div class=post-tags><a href=/tags/Hinet/>Hinet</a>
<a href=/tags/%E4%BB%AA%E5%99%A8%E5%93%8D%E5%BA%94/>仪器响应</a></div><nav class=post-nav><a class=prev href=/hinet-win32tools/><i class="iconfont icon-left"></i>
<span class="prev-text nav-default">Hi-net win32tools</span>
<span class="prev-text nav-mobile">上一篇</span></a>
<a class=next href=/hinet-channel-table/><span class="next-text nav-default">Hi-net Channel Table 文件</span>
<span class="next-text nav-mobile">下一篇</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div><div id=disqus_thread></div><script type=text/javascript>(function(){var a,b;if(window.location.hostname==='localhost')return;a=document.createElement('script'),a.type='text/javascript',a.async=!0,b='seisman',a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:seisman.info@gmail.com class="iconfont icon-email" title=email></a><a href=https://github.com/seisman class="iconfont icon-github" title=github></a><a href=https://movie.douban.com/people/131919859 class="iconfont icon-douban" title=douban></a><a href=https://blog.seisman.info/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>由 <a class=hexo-link href=https://gohugo.io>Hugo</a> 强力驱动</span>
<span class=division>|</span>
<span class=theme-info>主题 -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span>
<span class=copyright-year>&copy;
2013 -
2021
<span class=heart><i class="iconfont icon-heart"></i></span>
<span class=author>SeisMan</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script type=text/javascript src=/lib/jquery/jquery-3.2.1.min.js></script><script type=text/javascript src=/lib/slideout/slideout-1.0.1.min.js></script><script type=text/javascript src=/lib/fancybox/jquery.fancybox-3.1.20.min.js></script><script type=text/javascript src=/dist/even.26188efa.min.js></script><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$'],['\\(','\\)']]},showProcessingMessages:!1,messageStyle:'none'}</script><script async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin=anonymous></script></body></html>